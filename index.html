<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>التقرير النهائي لتحليل ومطابقة البيانات</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --color-blue-500: #3b82f6; --color-blue-600: #2563eb;
            --color-indigo-500: #6366f1; --color-indigo-600: #4f46e5;
            --color-green-500: #22c55e; --color-green-600: #16a34a;
            --color-orange-500: #f97316; --color-orange-600: #ea580c;
            --color-red-500: #ef4444; --color-red-600: #dc2626;
            --color-gray-50: #f9fafb; --color-gray-100: #f3f4f6; --color-gray-500: #6b7280;
            --color-gray-600: #4b5563; --color-gray-700: #374151; --color-gray-800: #1f2937;
        }
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: var(--color-gray-50);
            margin: 0;
            padding: 1rem;
        }
        @media (min-width: 640px) { body { padding: 1.5rem; } }
        @media (min-width: 1024px) { body { padding: 2rem; } }
        .container {
            max-width: 80rem;
            margin-left: auto;
            margin-right: auto;
        }
        header { text-align: center; margin-bottom: 2.5rem; }
        header h1 { font-size: 1.875rem; font-weight: 700; color: var(--color-gray-800); margin-bottom: 0.5rem; }
        @media (min-width: 640px) { header h1 { font-size: 2.25rem; } }
        header p { font-size: 1.125rem; color: var(--color-gray-600); }
        .grid { display: grid; gap: 1.5rem; }
        .grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
        @media (min-width: 768px) { .md-grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); } }
        @media (min-width: 1024px) { .lg-grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); } }
        @media (min-width: 1024px) { .lg-grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); } }
        @media (min-width: 1024px) { .lg-grid-cols-5 { grid-template-columns: repeat(5, minmax(0, 1fr)); } }
        @media (min-width: 1024px) { .lg-col-span-2 { grid-column: span 2 / span 2; } }
        @media (min-width: 1024px) { .lg-col-span-3 { grid-column: span 3 / span 3; } }
        .card { background-color: white; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.1); padding: 1.25rem; }
        .kpi-card { border-right-width: 4px; display: flex; align-items: center; justify-content: space-between; }
        .kpi-card .title { font-size: 0.875rem; font-weight: 500; color: var(--color-gray-500); }
        .kpi-card .value { font-size: 1.875rem; font-weight: 700; }
        .kpi-card .percentage { font-size: 0.875rem; font-weight: 600; }
        .kpi-card svg { width: 2.5rem; height: 2.5rem; }
        .section { margin-bottom: 2.5rem; }
        .section-title { font-size: 1.25rem; font-weight: 700; color: var(--color-gray-800); margin-bottom: 1rem; display: flex; align-items: center; }
        .section-title svg { width: 1.5rem; height: 1.5rem; margin-left: 0.5rem; }
        .info-box { border-left-width: 4px; padding: 1.5rem; }
        .info-box p { color: var(--color-gray-700); }
        table { width: 100%; text-align: center; }
        table thead tr { background-color: var(--color-gray-100); }
        table th { padding: 0.75rem; font-weight: 600; text-align: center; }
        table tbody tr { border-bottom: 1px solid #e5e7eb; }
        table td { padding: 0.75rem; }
        .text-right { text-align: right; }
        .font-bold { font-weight: 700; }
        .font-semibold { font-weight: 600; }
        .text-green { color: var(--color-green-600); }
        .text-orange { color: var(--color-orange-600); }
        .text-red { color: var(--color-red-600); }
        .list { list-style: none; padding: 0; space-y: 0.75rem; }
        .list li { display: flex; align-items: flex-start; }
        .list svg { width: 1.25rem; height: 1.25rem; margin-left: 0.5rem; margin-top: 0.25rem; flex-shrink: 0; }
        .pie-chart-container { height: 16rem; display: flex; align-items: center; justify-content: center; }
        .pie-chart { width: 12rem; height: 12rem; border-radius: 50%; position: relative; }
        .pie-chart::before { content: ''; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 6rem; height: 6rem; background: white; border-radius: 50%; }
        .legend { display: flex; justify-content: center; margin-top: 1rem; gap: 1rem; flex-wrap: wrap; }
        .legend-item { display: flex; align-items: center; }
        .legend-color { width: 1rem; height: 1rem; border-radius: 9999px; margin-left: 0.5rem; }
        .bar-chart-container { space-y: 1rem; }
        .bar-chart-item { display: flex; align-items: center; }
        .bar-chart-label { width: 6rem; text-align: right; padding-left: 0.5rem; flex-shrink: 0; font-size: 0.875rem; }
        .bar-chart-bar-wrapper { flex-grow: 1; background-color: var(--color-gray-100); border-radius: 0.25rem; }
        .bar-chart-bar { height: 1.5rem; background-color: var(--color-orange-500); border-radius: 0.25rem; display: flex; align-items: center; justify-content: flex-end; padding-right: 0.5rem; color: white; font-size: 0.75rem; font-weight: 600; transition: width 0.5s ease-in-out; }
        footer { margin-top: 2.5rem; text-align: center; color: var(--color-gray-500); font-size: 0.875rem; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>تقرير تحليل ومطابقة بيانات العملاء (SAP)</h1>
            <p>مقدم من إدارة المساحة والخرائط</p>
        </header>

        <section class="grid grid-cols-1 md-grid-cols-2 lg-grid-cols-4 section">
            <div class="card kpi-card" style="border-color: var(--color-blue-500);">
                <div>
                    <p class="title">إجمالي السجلات الخام</p>
                    <p class="value" style="color: var(--color-blue-600);" id="total-raw-records"></p>
                </div>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--color-blue-500);"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path><polyline points="14 2 14 8 20 8"></polyline></svg>
            </div>
            <div class="card kpi-card" style="border-color: var(--color-indigo-500);">
                <div>
                    <p class="title">العملاء الفريدون (الفعلي)</p>
                    <p class="value" style="color: var(--color-indigo-600);" id="total-unique-customers"></p>
                </div>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--color-indigo-500);"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
            </div>
            <div class="card kpi-card" style="border-color: var(--color-green-500);">
                <div>
                    <p class="title">مطابق للخرائط</p>
                    <p class="value text-green" id="total-matched"></p>
                    <p class="percentage text-green" id="total-matched-percentage"></p>
                </div>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--color-green-500);"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
            </div>
            <div class="card kpi-card" style="border-color: var(--color-orange-500);">
                <div>
                    <p class="title">بحاجة لتحقق ميداني</p>
                    <p class="value text-orange" id="total-needs-verification"></p>
                    <p class="percentage text-orange" id="total-needs-verification-percentage"></p>
                </div>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--color-orange-500);"><path d="m21.73 18-8-14a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"></path><line x1="12" x2="12" y1="9" y2="13"></line><line x1="12" x2="12.01" y1="17" y2="17"></line></svg>
            </div>
        </section>

        <section class="grid grid-cols-1 lg-grid-cols-2 section">
            <div class="card info-box" style="border-color: var(--color-blue-500);">
                <h2 class="section-title" style="color: var(--color-blue-600);"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22h-2a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8"></path><path d="M15 18H9"></path><path d="M12 15v6"></path><path d="m21.5 16.5-1.9 1.9c-1.3 1.3-3.4 1.3-4.7 0l-1.9-1.9c-1.3-1.3-1.3-3.4 0-4.7l1.9-1.9c1.3-1.3 3.4-1.3 4.7 0l1.9 1.9c1.3 1.3 1.3 3.5 0 4.8z"></path></svg>توضيح هام: مرحلة تنقية البيانات</h2>
                <p id="data-purification-text"> </p>
            </div>
            <div class="card info-box" style="border-color: var(--color-orange-500);">
                <h2 class="section-title" style="color: var(--color-orange-600);"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>تقدير المجهود المطلوب للتحقق الميداني</h2>
                <div style="text-align: center;">
                    <p style="font-size: 2.25rem; font-weight: 700; color: var(--color-orange-600);" id="fieldwork-days"></p>
                    <p style="font-size: 1.125rem; font-weight: 600; color: var(--color-gray-700);">يوم عمل ميداني</p>
                    <p style="font-size: 0.875rem; color: var(--color-gray-500); margin-top: 0.5rem;" id="fieldwork-assumptions-text"></p>
                </div>
            </div>
        </section>

        <section class="card section">
            <h2 class="section-title">تفصيل النتائج حسب المحافظة</h2>
            <div style="overflow-x: auto;">
                <table>
                    <thead>
                        <tr>
                            <th class="text-right">المحافظة</th>
                            <th>السجلات الخام</th>
                            <th>العملاء الفريدون</th>
                            <th class="text-green">مطابق</th>
                            <th class="text-orange">بحاجة لتحقق</th>
                            <th>نسبة المطابقة</th>
                        </tr>
                    </thead>
                    <tbody id="governorates-table-body">
                        <!-- سيتم تعبئة هذا القسم تلقائياً بواسطة الجافاسكريبت -->
                    </tbody>
                </table>
            </div>
        </section>

        <section class="grid grid-cols-1 lg-grid-cols-5 section">
            <div class="card lg-col-span-2">
                <h2 class="section-title" style="justify-content: center;">التوزيع الإجمالي للنتائج</h2>
                <div class="pie-chart-container">
                    <div class="pie-chart" id="pie-chart"></div>
                </div>
                <div class="legend">
                    <div class="legend-item"><div class="legend-color" style="background-color: var(--color-green-500);"></div><span id="pie-legend-matched"></span></div>
                    <div class="legend-item"><div class="legend-color" style="background-color: var(--color-orange-500);"></div><span id="pie-legend-needs-verification"></span></div>
                </div>
            </div>
            <div class="card lg-col-span-3">
                <h2 class="section-title" style="justify-content: center;">المحافظات الأعلى في الحاجة للتحقق الميداني</h2>
                <div class="bar-chart-container" id="bar-chart-container">
                    <!-- سيتم تعبئة هذا القسم تلقائياً -->
                </div>
            </div>
        </section>

        <section class="grid grid-cols-1 lg-grid-cols-2 section">
            <div class="card">
                <h2 class="section-title"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--color-red-600);"><circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="6"></circle><circle cx="12" cy="12" r="2"></circle></svg>النتائج الرئيسية</h2>
                <ul class="list" style="color: var(--color-gray-700);" id="key-findings-list">
                    <!-- يتم التعبئة تلقائياً -->
                </ul>
            </div>
            <div class="card">
                <h2 class="section-title"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--color-green-600);"><path d="M12 22a10 10 0 1 1 0-20 10 10 0 0 1 0 20Z"></path><path d="M13.29 9.29 16 12l-2.71 2.71"></path><path d="M8 12h8"></path></svg>مسار العمل المقترح</h2>
                <ul class="list" style="color: var(--color-gray-700);" id="action-plan-list">
                    <!-- يتم التعبئة تلقائياً -->
                </ul>
            </div>
        </section>
        
        <footer>
             <p id="report-date"></p>
        </footer>
    </div>
<script>
// *** ابدأ التعديل هنا: هذا هو مصدر البيانات الوحيد ***
// قم بتحديث الأرقام في هذا القسم فقط.
// لا تحتاج لحساب "بحاجة لتحقق" أو "نسبة المطابقة"، سيتم حسابها تلقائياً.
const reportConfig = {
    teams: 10, // عدد الفرق الميدانية
    dailyRate: 60, // عدد الحالات التي ينجزها الفريق الواحد يومياً
};

const reportData = [
    { governorate: "المنوفية", rawRecords: 426923, uniqueCustomers: 145120, matched: 93843 },
    { governorate: "القليوبية", rawRecords: 236804, uniqueCustomers: 64764,  matched: 23339 },
    { governorate: "الدقهلية", rawRecords: 106043, uniqueCustomers: 38368,  matched: 13452 },
    { governorate: "الغربية",   rawRecords: 70869,  uniqueCustomers: 25642,  matched: 13092 },
    { governorate: "الإسكندرية", rawRecords: 34371,  uniqueCustomers: 13253,  matched: 12907 },
    { governorate: "الأقصر",    rawRecords: 16368,  uniqueCustomers: 7371,   matched: 2172 },
    { governorate: "أسوان",     rawRecords: 14371,  uniqueCustomers: 4802,   matched: 665 },
    { governorate: "القاهرة",   rawRecords: 14793,  uniqueCustomers: 3811,   matched: 1354 },
    { governorate: "الجيزة",    rawRecords: 114,    uniqueCustomers: 111,    matched: 0 },
    { governorate: "الصالحية",  rawRecords: 216,    uniqueCustomers: 103,    matched: 46 },
    { governorate: "الإسماعيلية", rawRecords: 96,     uniqueCustomers: 10,     matched: 0 },
];
// *** انتهى قسم التعديل ***


// ---------------------------------------------------------------------------------------------
// لا حاجة لتعديل أي شيء أسفل هذا الخط. الكود التالي سيقوم بكل الحسابات والتحديثات تلقائياً.
// ---------------------------------------------------------------------------------------------

document.addEventListener('DOMContentLoaded', function() {
    // دالة لتنسيق الأرقام مع فواصل
    const formatNumber = (num) => num.toLocaleString('ar-EG');

    // 1. معالجة وحساب البيانات
    let totalRaw = 0;
    let totalUnique = 0;
    let totalMatched = 0;
    let totalNeedsVerification = 0;

    const processedData = reportData.map(item => {
        const needsVerification = item.uniqueCustomers - item.matched;
        const matchPercentage = item.uniqueCustomers > 0 ? (item.matched / item.uniqueCustomers) * 100 : 0;

        totalRaw += item.rawRecords;
        totalUnique += item.uniqueCustomers;
        totalMatched += item.matched;
        totalNeedsVerification += needsVerification;
        
        return { ...item, needsVerification, matchPercentage };
    });

    // 2. تحديث بطاقات الأداء الرئيسية (KPIs)
    document.getElementById('total-raw-records').textContent = formatNumber(totalRaw);
    document.getElementById('total-unique-customers').textContent = formatNumber(totalUnique);
    document.getElementById('total-matched').textContent = formatNumber(totalMatched);
    document.getElementById('total-needs-verification').textContent = formatNumber(totalNeedsVerification);
    
    const totalMatchPercentage = totalUnique > 0 ? (totalMatched / totalUnique * 100).toFixed(1) : 0;
    const totalNeedsVerificationPercentage = totalUnique > 0 ? (totalNeedsVerification / totalUnique * 100).toFixed(1) : 0;
    
    document.getElementById('total-matched-percentage').textContent = `${totalMatchPercentage}%`;
    document.getElementById('total-needs-verification-percentage').textContent = `${totalNeedsVerificationPercentage}%`;

    // 3. تحديث الصناديق المعلوماتية
    document.getElementById('data-purification-text').innerHTML = `الخطوة الأولى في عملنا هي تحليل وتنقية البيانات الخام المستلمة. من أصل <strong>${formatNumber(totalRaw)}</strong> سجل خام، تبين أن العدد الفعلي للعملاء الفريدين هو <strong>${formatNumber(totalUnique)}</strong>. هذه المرحلة ضرورية لتحديد حجم العمل الحقيقي.`;
    
    const fieldworkDays = Math.ceil(totalNeedsVerification / (reportConfig.teams * reportConfig.dailyRate));
    document.getElementById('fieldwork-days').textContent = formatNumber(fieldworkDays);
    document.getElementById('fieldwork-assumptions-text').innerHTML = `(بناءً على افتراض وجود <strong>${reportConfig.teams} فرق</strong>، كل فريق ينجز <strong>${reportConfig.dailyRate}</strong> حالة يومياً)`;

    // 4. تعبئة جدول المحافظات
    const tableBody = document.getElementById('governorates-table-body');
    tableBody.innerHTML = ''; // مسح الجدول القديم
    processedData.forEach(item => {
        const row = document.createElement('tr');
        if (item.matchPercentage === 0) {
            row.style.backgroundColor = '#fffbeb'; // تمييز الصفوف ذات المطابقة صفر
        }
        row.innerHTML = `
            <td class="font-bold text-right">${item.governorate}</td>
            <td style="color: var(--color-gray-600);">${formatNumber(item.rawRecords)}</td>
            <td class="font-semibold">${formatNumber(item.uniqueCustomers)}</td>
            <td class="text-green">${formatNumber(item.matched)}</td>
            <td class="font-bold ${item.matchPercentage === 0 ? 'text-red' : 'text-orange'}">${formatNumber(item.needsVerification)}</td>
            <td class="font-semibold">${item.matchPercentage.toFixed(1)}%</td>
        `;
        tableBody.appendChild(row);
    });

    // 5. تحديث الرسم البياني الدائري (Pie Chart)
    const pieChart = document.getElementById('pie-chart');
    const pieAngle = totalNeedsVerificationPercentage * 3.6; // 1% = 3.6 degrees
    pieChart.style.backgroundImage = `conic-gradient(var(--color-orange-500) 0deg ${pieAngle}deg, var(--color-green-500) ${pieAngle}deg 360deg)`;
    document.getElementById('pie-legend-matched').textContent = `مطابق (${totalMatchPercentage}%)`;
    document.getElementById('pie-legend-needs-verification').textContent = `بحاجة لتحقق (${totalNeedsVerificationPercentage}%)`;

    // 6. تحديث الرسم البياني الشريطي (Bar Chart)
    const barChartContainer = document.getElementById('bar-chart-container');
    barChartContainer.innerHTML = '';
    const top5NeedsVerification = [...processedData]
        .sort((a, b) => b.needsVerification - a.needsVerification)
        .slice(0, 5);

    const maxVal = top5NeedsVerification.length > 0 ? top5NeedsVerification[0].needsVerification : 0;
    
    top5NeedsVerification.forEach(item => {
        const barWidth = maxVal > 0 ? (item.needsVerification / maxVal) * 100 : 0;
        const barItem = document.createElement('div');
        barItem.className = 'bar-chart-item';
        barItem.innerHTML = `
            <div class="bar-chart-label">${item.governorate}</div>
            <div class="bar-chart-bar-wrapper">
                <div class="bar-chart-bar" style="width: ${barWidth}%;">${formatNumber(item.needsVerification)}</div>
            </div>
        `;
        barChartContainer.appendChild(barItem);
    });

    // 7. تحديث قسم النتائج الرئيسية والتوصيات
    const keyFindingsList = document.getElementById('key-findings-list');
    keyFindingsList.innerHTML = `
        <li><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--color-red-500);"><path d="m21.73 18-8-14a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"></path><line x1="12" x2="12" y1="9" y2="13"></line><line x1="12" x2="12.01" y1="17" y2="17"></line></svg><strong>${totalNeedsVerificationPercentage}% من العملاء</strong> بحاجة لتحقق ميداني عاجل.</li>
        <li><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--color-red-500);"><path d="m21.73 18-8-14a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"></path><line x1="12" x2="12" y1="9" y2="13"></line><line x1="12" x2="12.01" y1="17" y2="17"></line></svg>وجود <strong>تفاوت حاد</strong> في جودة البيانات (نسب مطابقة من ${Math.min(...processedData.map(p => p.matchPercentage)).toFixed(1)}% إلى ${Math.max(...processedData.map(p => p.matchPercentage)).toFixed(1)}%).</li>
        <li><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--color-red-500);"><path d="m21.73 18-8-14a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"></path><line x1="12" x2="12" y1="9" y2="13"></line><line x1="12" x2="12.01" y1="17" y2="17"></line></svg>المهمة تتطلب <strong>مجهوداً ميدانياً ضخماً</strong> ومنظماً يفوق التحليل المكتبي.</li>
    `;

    const top2NeedsVerificationNames = top5NeedsVerification.slice(0, 2).map(i => i.governorate);
    const actionPlanList = document.getElementById('action-plan-list');
    actionPlanList.innerHTML = `
        <li><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--color-green-500);"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg><strong>المرحلة الأولى:</strong> تحديد الأولويات بالبدء بالمحافظات الأكثر حاجة (${top2NeedsVerificationNames.join('، ')}).</li>
        <li><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--color-green-500);"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg><strong>المرحلة الثانية:</strong> نشر فرق التحقق الميداني بشكل منظم لتغطية الحالات غير المطابقة.</li>
        <li><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--color-green-500);"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg><strong>المرحلة الثالثة:</strong> تحديث خرائط ونظم المعلومات (GIS) بالبيانات الصحيحة بشكل دوري.</li>
    `;


    // 8. تحديث التاريخ
    document.getElementById('report-date').textContent = 'تاريخ التقرير: ' + new Date().toLocaleDateString('ar-EG', { year: 'numeric', month: 'long', day: 'numeric' });
});

</script>
</body>
</html>
